<app-journey-progress-header />

<ion-content class="ion-padding">
  <div class="content">
    <h1 class="title-page">Describe the situation</h1>

    <p class="subtitle-page">What happened that triggered these emotions?</p>

    <div class="textarea-wrapper">
      <ion-textarea
        [value]="situationText()"
        (ionInput)="onSituationInput($event)"
        rows="6"
        placeholder="Example: I was in a meeting and my boss criticized my work in front of everyone. I felt embarrassed and worried about my performance..."
        class="situation-input"
        [counter]="true"
        maxlength="500"
        [autoGrow]="true">
      </ion-textarea>
      @if (hasSituationText()) {
        <ion-button fill="clear" class="clear-button" (click)="clearSituationText()">
          <ion-icon slot="icon-only" name="close"></ion-icon>
        </ion-button>
      }
    </div>

    <div class="helper-text">
      <ion-icon name="information-circle-outline"></ion-icon>
      <span>Try to be specific about what happened, who was involved, and when it occurred.</span>
    </div>

    @if (situationText().length > 0 && situationText().length < 20) {
      <ion-note class="validation-note">
        <ion-icon name="alert-circle-outline"></ion-icon>
        Please provide more detail about the situation (at least 20 characters)
      </ion-note>
    }
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <div class="footer-buttons">
      <ion-button expand="block" fill="clear" (click)="goBack()">
        Back
      </ion-button>
      <ion-button expand="block" [disabled]="!canProceed()" (click)="proceed()">
        Continue
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>
