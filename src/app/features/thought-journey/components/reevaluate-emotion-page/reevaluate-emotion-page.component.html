
    <app-journey-progress-header />

    <ion-content class="ion-padding">
      <div class="content">
        <h1 class="title-page">Re-evaluate Your Belief</h1>
        <p class="subtitle-page">Rate how strongly you believed in the thought before and now, after planning your actions.</p>

        <div class="rating-section">
          <div class="rating-item">
            <div class="rating-header">
              <h3>Before (initial belief strength)</h3>
              <span class="rating-value">{{ originalBeliefRating() }}/10</span>
            </div>
            <p class="rating-description">How strongly did you believe this thought was true when you first had it?</p>
            <ion-range
              [value]="originalBeliefRating()"
              (ionChange)="onOriginalRatingChange($event)"
              [min]="0"
              [max]="10"
              [pin]="true"
              [ticks]="true"
              [snaps]="true"
              color="primary">
              <ion-label slot="start">0</ion-label>
              <ion-label slot="end">10</ion-label>
            </ion-range>
          </div>

          <div class="rating-item">
            <div class="rating-header">
              <h3>Now (current belief strength)</h3>
              <span class="rating-value">{{ currentBeliefRating() }}/10</span>
            </div>
            <p class="rating-description">How strongly do you believe this thought is true now?</p>
            <ion-range
              [value]="currentBeliefRating()"
              (ionChange)="onCurrentRatingChange($event)"
              [min]="0"
              [max]="10"
              [pin]="true"
              [ticks]="true"
              [snaps]="true"
              color="primary">
              <ion-label slot="start">0</ion-label>
              <ion-label slot="end">10</ion-label>
            </ion-range>
          </div>

          @if (beliefChangeDirection() !== 'unchanged') {
            <div class="belief-change-indicator" [class]="beliefChangeDirection()">
              @if (beliefChangeDirection() === 'improved') {
                <span class="change-icon">↓</span>
                <span class="change-text">Belief strength decreased by {{ Math.abs(beliefChangeAmount()) }} points</span>
              } @else {
                <span class="change-icon">↑</span>
                <span class="change-text">Belief strength increased by {{ Math.abs(beliefChangeAmount()) }} points</span>
              }
            </div>
          }
        </div>

        <div class="textarea-wrapper">
          <ion-textarea
            [value]="insights()"
            (ionInput)="onInsightsInput($event)"
            placeholder="Optional: Any insights or thoughts about your plan?"
            rows="4"
            class="insights-input"
            [counter]="true"
            maxlength="500"
            [autoGrow]="true"
            appDismissKeyboardOnEnter>
          </ion-textarea>
          @if (hasInsightsText()) {
            <ion-button fill="clear" class="clear-button" (click)="clearInsights()">
              <ion-icon slot="icon-only" name="close"></ion-icon>
            </ion-button>
          }
        </div>
      </div>
    </ion-content>

    <ion-footer>
      <ion-toolbar>
        <div class="footer-buttons">
          <ion-button expand="block" fill="clear" (click)="goBack()">
            Back
          </ion-button>
          <ion-button
            expand="block"
            (click)="proceed()">
            Continue
          </ion-button>
        </div>
      </ion-toolbar>
    </ion-footer>
  